<!-- ADD THESE MODALS BEFORE THE CLOSING </body> TAG -->

<!-- Add Contribution Modal (Enhanced) -->
<div x-show="showContributionModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showContributionModal = false">
    <div class="bg-white rounded-xl p-6 w-full max-w-lg" @click.stop>
        <h3 class="text-2xl font-bold mb-4 text-green-600">
            <i class="fas fa-hand-holding-usd mr-2"></i>Record Contribution
        </h3>
        <form @submit.prevent="saveContribution()">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Select Campaign *</label>
                    <select x-model="contributionForm.fundraising_id" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500" required>
                        <option value="">Choose a campaign...</option>
                        <template x-for="f in fundraisings.filter(f => f.status === 'active')" :key="f.id">
                            <option :value="f.id" x-text="f.title + ' - ' + f.campaign_id"></option>
                        </template>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Contribution Amount (UGX) *</label>
                    <input type="number" x-model="contributionForm.amount" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500" min="100" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Contributor Name</label>
                    <input type="text" x-model="contributionForm.contributor_name" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500" placeholder="Anonymous">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Email</label>
                    <input type="email" x-model="contributionForm.contributor_email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500" placeholder="contributor@email.com">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Phone</label>
                    <input type="tel" x-model="contributionForm.contributor_phone" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500" placeholder="+256...">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Payment Method</label>
                    <select x-model="contributionForm.payment_method" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500">
                        <option value="cash">Cash</option>
                        <option value="mobile_money">Mobile Money</option>
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="check">Check</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Notes</label>
                    <textarea x-model="contributionForm.notes" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500" rows="2" placeholder="Additional notes..."></textarea>
                </div>
            </div>
            <div class="flex justify-end gap-2 mt-6">
                <button type="button" @click="showContributionModal = false" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                    <i class="fas fa-save mr-2"></i>Save Contribution
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Add Expense Modal -->
<div x-show="showExpenseModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showExpenseModal = false">
    <div class="bg-white rounded-xl p-6 w-full max-w-lg" @click.stop>
        <h3 class="text-2xl font-bold mb-4 text-orange-600">
            <i class="fas fa-receipt mr-2"></i>Record Expense
        </h3>
        <form @submit.prevent="saveExpense()">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Select Campaign *</label>
                    <select x-model="expenseForm.fundraising_id" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" required>
                        <option value="">Choose a campaign...</option>
                        <template x-for="f in fundraisings" :key="f.id">
                            <option :value="f.id" x-text="f.title + ' - ' + f.campaign_id"></option>
                        </template>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Description *</label>
                    <input type="text" x-model="expenseForm.description" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" placeholder="What was this expense for?" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Amount (UGX) *</label>
                    <input type="number" x-model="expenseForm.amount" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" min="0" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Category</label>
                    <select x-model="expenseForm.category" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500">
                        <option value="marketing">Marketing</option>
                        <option value="venue">Venue</option>
                        <option value="supplies">Supplies</option>
                        <option value="transportation">Transportation</option>
                        <option value="food">Food & Beverages</option>
                        <option value="equipment">Equipment</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Expense Date *</label>
                    <input type="date" x-model="expenseForm.expense_date" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Receipt Number</label>
                    <input type="text" x-model="expenseForm.receipt_number" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" placeholder="Optional">
                </div>
            </div>
            <div class="flex justify-end gap-2 mt-6">
                <button type="button" @click="showExpenseModal = false" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
                    <i class="fas fa-save mr-2"></i>Save Expense
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Expense Modal -->
<div x-show="showEditExpenseModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showEditExpenseModal = false">
    <div class="bg-white rounded-xl p-6 w-full max-w-lg" @click.stop>
        <h3 class="text-2xl font-bold mb-4 text-orange-600">
            <i class="fas fa-edit mr-2"></i>Edit Expense
        </h3>
        <form @submit.prevent="saveExpense()">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Description *</label>
                    <input type="text" x-model="expenseForm.description" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Amount (UGX) *</label>
                    <input type="number" x-model="expenseForm.amount" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" min="0" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Category</label>
                    <select x-model="expenseForm.category" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500">
                        <option value="marketing">Marketing</option>
                        <option value="venue">Venue</option>
                        <option value="supplies">Supplies</option>
                        <option value="transportation">Transportation</option>
                        <option value="food">Food & Beverages</option>
                        <option value="equipment">Equipment</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Expense Date *</label>
                    <input type="date" x-model="expenseForm.expense_date" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500" required>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Receipt Number</label>
                    <input type="text" x-model="expenseForm.receipt_number" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-500">
                </div>
            </div>
            <div class="flex justify-end gap-2 mt-6">
                <button type="button" @click="showEditExpenseModal = false" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
                    <i class="fas fa-save mr-2"></i>Update Expense
                </button>
            </div>
        </form>
    </div>
</div>
